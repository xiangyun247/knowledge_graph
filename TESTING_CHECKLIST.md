# 前后端全面测试清单

## 📋 测试流程概览

本测试清单将按照以下顺序进行：
1. **环境准备与依赖检查**
2. **后端启动与基础测试**
3. **前端启动与基础测试**
4. **后端 API 功能测试**
5. **前端页面功能测试**
6. **前后端集成测试**
7. **性能与稳定性测试**
8. **错误处理与边界测试**

---

## 阶段一：环境准备与依赖检查

### ✅ 1.1 检查后端环境

**操作步骤：**
```bash
# 进入后端项目目录
cd C:\Users\23035\PycharmProjects\knowledge_gragh

# 检查 Python 版本（需要 ≥ 3.9）
python --version

# 检查依赖是否安装
pip list | findstr "fastapi neo4j mysql sentence-transformers"

# 检查 .env 文件是否存在
dir .env
```

**预期结果：**
- ✅ Python 版本 ≥ 3.9
- ✅ 关键依赖已安装（fastapi, uvicorn, neo4j, pymysql, sentence-transformers 等）
- ✅ .env 文件存在

**检查项：**
- [ ] Python 版本正确
- [ ] 所有依赖已安装
- [ ] .env 文件存在且配置完整

---

### ✅ 1.2 检查前端环境

**操作步骤：**
```bash
# 进入前端项目目录
cd C:\Users\23035\Desktop\备份\vue_test_style

# 检查 Node.js 版本
node --version

# 检查 npm 版本
npm --version

# 检查依赖是否安装
npm list --depth=0
```

**预期结果：**
- ✅ Node.js 版本正常
- ✅ npm 版本正常
- ✅ node_modules 目录存在

**检查项：**
- [ ] Node.js 已安装
- [ ] npm 已安装
- [ ] 前端依赖已安装（如未安装，运行 `npm install`）

---

### ✅ 1.3 检查数据库连接

**操作步骤：**
```bash
# 在后端目录运行数据库连接测试
cd C:\Users\23035\PycharmProjects\knowledge_gragh
python tests/test_system.py
```

**预期结果：**
- ✅ Neo4j 连接成功
- ✅ MySQL 连接成功
- ✅ Embedding 模型加载成功

**检查项：**
- [ ] Neo4j 服务运行中
- [ ] MySQL 服务运行中
- [ ] Embedding 模型可用

---

## 阶段二：后端启动与基础测试

### ✅ 2.1 启动后端服务

**操作步骤：**
```bash
# 在后端目录启动服务
cd C:\Users\23035\PycharmProjects\knowledge_gragh
python run.py
```

**预期结果：**
- ✅ 服务启动成功
- ✅ 显示配置摘要
- ✅ 监听在 `http://0.0.0.0:5001`
- ✅ 无错误日志

**检查项：**
- [ ] 服务启动成功
- [ ] 端口 5001 可访问
- [ ] 日志显示正常
- [ ] 无关键错误

---

### ✅ 2.2 测试后端健康检查接口

**操作步骤：**
```bash
# 在浏览器或使用 curl 访问
# 浏览器访问：http://localhost:5001/health
# 或使用 curl：
curl http://localhost:5001/health
```

**预期结果：**
- ✅ 返回 JSON 响应
- ✅ 状态为 "healthy" 或 "ok"
- ✅ 包含数据库连接状态

**检查项：**
- [ ] 健康检查接口响应正常
- [ ] 数据库连接状态正确

---

### ✅ 2.3 测试后端 API 文档

**操作步骤：**
```bash
# 浏览器访问 Swagger UI
http://localhost:5001/docs

# 或访问 ReDoc
http://localhost:5001/redoc
```

**预期结果：**
- ✅ Swagger UI 正常显示
- ✅ 所有 API 端点可见
- ✅ 可以查看 API 文档

**检查项：**
- [ ] API 文档可访问
- [ ] 所有端点可见

---

## 阶段三：前端启动与基础测试

### ✅ 3.1 启动前端服务

**操作步骤：**
```bash
# 进入前端目录
cd C:\Users\23035\Desktop\备份\vue_test_style

# 启动开发服务器
npm run serve
# 或
npm run dev
```

**预期结果：**
- ✅ 前端服务启动成功
- ✅ 监听在 `http://localhost:8080`（或显示的其他端口）
- ✅ 编译无错误

**检查项：**
- [ ] 前端服务启动成功
- [ ] 端口可访问
- [ ] 无编译错误

---

### ✅ 3.2 测试前端基础页面

**操作步骤：**
1. 浏览器访问 `http://localhost:8080`
2. 检查各个页面路由

**预期结果：**
- ✅ 封面页（Cover）正常显示
- ✅ 首页（Home）正常显示
- ✅ 所有路由可访问

**检查项：**
- [ ] 封面页加载正常
- [ ] 首页加载正常
- [ ] 路由跳转正常
- [ ] 无控制台错误

---

## 阶段四：后端 API 功能测试

### ✅ 4.1 测试知识图谱统计接口

**接口：** `GET /api/stats`

**操作步骤：**
```bash
curl http://localhost:5001/api/stats
# 或在 Swagger UI 中测试
```

**预期结果：**
- ✅ 返回节点数、关系数等统计信息
- ✅ 数据格式正确

**检查项：**
- [ ] 接口响应正常
- [ ] 统计数据准确

---

### ✅ 4.2 测试实体搜索接口

**接口：** `GET /api/search/entities`

**操作步骤：**
```bash
# 测试搜索疾病
curl "http://localhost:5001/api/search/entities?keyword=胰腺炎&entity_type=Disease"

# 测试搜索症状
curl "http://localhost:5001/api/search/entities?keyword=疼痛&entity_type=Symptom"
```

**预期结果：**
- ✅ 返回匹配的实体列表
- ✅ 结果按相关性排序

**检查项：**
- [ ] 搜索功能正常
- [ ] 结果准确

---

### ✅ 4.3 测试智能问答接口

**接口：** `POST /api/query`

**操作步骤：**
```bash
# 使用 curl 测试
curl -X POST http://localhost:5001/api/query \
  -H "Content-Type: application/json" \
  -d "{\"question\": \"急性胰腺炎有什么症状？\", \"use_graph\": true, \"top_k\": 5}"
```

**测试用例：**
1. **症状查询：** "急性胰腺炎有什么症状？"
2. **治疗查询：** "急性胰腺炎如何治疗？"
3. **科室查询：** "急性胰腺炎看什么科？"
4. **病因查询：** "上腹部疼痛可能是什么病？"
5. **药物查询：** "某药物有什么作用？"

**预期结果：**
- ✅ 返回答案
- ✅ 包含来源信息
- ✅ 答案准确

**检查项：**
- [ ] 症状查询正常
- [ ] 治疗查询正常
- [ ] 科室查询正常
- [ ] 病因查询正常
- [ ] 药物查询正常

---

### ✅ 4.4 测试知识图谱可视化接口

**接口：** `GET /api/graph/data`

**操作步骤：**
```bash
curl http://localhost:5001/api/graph/data
```

**预期结果：**
- ✅ 返回节点和边的数据
- ✅ 数据格式符合前端可视化要求

**检查项：**
- [ ] 接口响应正常
- [ ] 数据格式正确

---

### ✅ 4.5 测试文件上传接口

**接口：** `POST /api/upload`

**操作步骤：**
```bash
# 使用 curl 上传文件（需要准备测试文件）
curl -X POST http://localhost:5001/api/upload \
  -F "file=@test.txt"
```

**预期结果：**
- ✅ 文件上传成功
- ✅ 返回文件信息

**检查项：**
- [ ] 文件上传功能正常
- [ ] 支持多种文件格式（TXT, PDF, JSON）

---

### ✅ 4.6 测试知识图谱构建接口

**接口：** `POST /api/kg/build`

**操作步骤：**
```bash
# 构建知识图谱（需要先上传文件）
curl -X POST http://localhost:5001/api/kg/build \
  -H "Content-Type: application/json" \
  -d "{\"file_id\": \"xxx\", \"graph_name\": \"测试图谱\"}"
```

**预期结果：**
- ✅ 构建任务创建成功
- ✅ 返回任务 ID

**检查项：**
- [ ] 构建任务创建成功
- [ ] 可以查询构建状态

---

### ✅ 4.7 测试历史记录接口

**接口：** `GET /api/history/list`

**操作步骤：**
```bash
curl http://localhost:5001/api/history/list
```

**预期结果：**
- ✅ 返回历史记录列表
- ✅ 支持分页和筛选

**检查项：**
- [ ] 历史记录查询正常
- [ ] 分页功能正常

---

## 阶段五：前端页面功能测试

### ✅ 5.1 测试封面页（Cover）

**测试内容：**
- [ ] 页面加载正常
- [ ] 动画效果正常
- [ ] 按钮可点击
- [ ] 主题切换功能正常（科技风/医疗风）
- [ ] 响应式布局正常

---

### ✅ 5.2 测试首页（Home）

**测试内容：**
- [ ] 系统能力卡片显示正常
- [ ] 系统监控数据正常
- [ ] 实时监控图表正常
- [ ] 图表响应式调整正常
- [ ] 主题切换正常

---

### ✅ 5.3 测试聊天问答页（Chat）

**测试内容：**
- [ ] 聊天界面正常显示
- [ ] 发送消息功能正常
- [ ] 接收回答功能正常
- [ ] 消息历史记录正常
- [ ] 发送按钮 loading 状态正常
- [ ] 空状态显示正常
- [ ] 错误处理正常

**测试用例：**
1. 发送简单问题："急性胰腺炎有什么症状？"
2. 发送复杂问题："如何治疗急性胰腺炎？"
3. 发送无效问题："你好"
4. 测试连续发送多条消息

---

### ✅ 5.4 测试知识图谱页（Graph）

**测试内容：**
- [ ] 图谱可视化正常显示
- [ ] 节点可点击
- [ ] 节点展开/收缩功能正常
- [ ] 图谱布局正常
- [ ] 搜索功能正常
- [ ] 筛选功能正常
- [ ] 空状态显示正常

---

### ✅ 5.5 测试搜索页（Search）

**测试内容：**
- [ ] 搜索框正常
- [ ] 搜索结果正常显示
- [ ] 筛选功能正常（按实体类型）
- [ ] 分页功能正常
- [ ] 空状态显示正常
- [ ] 错误处理正常

**测试用例：**
1. 搜索疾病："胰腺炎"
2. 搜索症状："疼痛"
3. 搜索药物："抗生素"
4. 测试无结果情况

---

### ✅ 5.6 测试文件上传页（DataUpload）

**测试内容：**
- [ ] 文件上传界面正常
- [ ] 文件选择功能正常
- [ ] 文件预览功能正常
- [ ] 上传进度显示正常
- [ ] 上传成功提示正常
- [ ] 错误处理正常
- [ ] 支持多种文件格式

**测试用例：**
1. 上传 TXT 文件
2. 上传 PDF 文件
3. 上传 JSON 文件
4. 测试大文件上传
5. 测试无效文件格式

---

### ✅ 5.7 测试历史记录页（History）

**测试内容：**
- [ ] 历史记录列表正常显示
- [ ] 筛选功能正常（按类型、状态）
- [ ] 分页功能正常
- [ ] 搜索功能正常
- [ ] 详情查看正常
- [ ] 空状态显示正常

---

### ✅ 5.8 测试登录/注册页（Login）

**测试内容：**
- [ ] 登录界面正常显示
- [ ] 注册界面正常显示
- [ ] 表单验证正常
- [ ] 登录功能正常
- [ ] 注册功能正常
- [ ] Loading 状态正常
- [ ] 错误提示正常
- [ ] 主题切换正常

**测试用例：**
1. 测试登录（使用有效账号）
2. 测试注册（新用户）
3. 测试无效登录信息
4. 测试表单验证

---

### ✅ 5.9 测试用户资料页（UserProfile）

**测试内容：**
- [ ] 用户信息显示正常
- [ ] 头像上传功能正常
- [ ] 信息编辑功能正常
- [ ] 保存功能正常
- [ ] 表单验证正常

---

### ✅ 5.10 测试常见问题页（FAQ）

**测试内容：**
- [ ] FAQ 列表正常显示
- [ ] 分类筛选正常
- [ ] 展开/折叠功能正常
- [ ] 搜索功能正常

---

## 阶段六：前后端集成测试

### ✅ 6.1 测试前端调用后端 API

**测试内容：**
- [ ] 前端 API 请求正常
- [ ] 跨域问题已解决
- [ ] 请求/响应格式正确
- [ ] 错误处理正常

**检查方法：**
- 打开浏览器开发者工具（F12）
- 查看 Network 标签
- 检查 API 请求和响应

---

### ✅ 6.2 测试完整业务流程

**测试场景 1：智能问答流程**
1. [ ] 前端发送问题
2. [ ] 后端处理并返回答案
3. [ ] 前端显示答案
4. [ ] 历史记录保存

**测试场景 2：文件上传与图谱构建流程**
1. [ ] 前端上传文件
2. [ ] 后端接收文件
3. [ ] 前端触发图谱构建
4. [ ] 后端构建图谱
5. [ ] 前端显示构建状态
6. [ ] 前端查看图谱

**测试场景 3：搜索与可视化流程**
1. [ ] 前端搜索实体
2. [ ] 后端返回结果
3. [ ] 前端显示结果
4. [ ] 前端点击查看图谱
5. [ ] 图谱可视化正常

---

## 阶段七：性能与稳定性测试

### ✅ 7.1 测试响应时间

**测试内容：**
- [ ] API 响应时间 < 3秒（正常情况）
- [ ] 前端页面加载时间 < 2秒
- [ ] 图表渲染时间 < 1秒

---

### ✅ 7.2 测试并发请求

**测试内容：**
- [ ] 同时发送多个请求
- [ ] 系统稳定运行
- [ ] 无内存泄漏

---

### ✅ 7.3 测试长时间运行

**测试内容：**
- [ ] 系统运行 30 分钟以上
- [ ] 无崩溃
- [ ] 性能无明显下降

---

## 阶段八：错误处理与边界测试

### ✅ 8.1 测试网络错误

**测试内容：**
- [ ] 后端服务停止时，前端错误提示正常
- [ ] 网络断开时，错误处理正常

---

### ✅ 8.2 测试无效输入

**测试内容：**
- [ ] 空查询处理正常
- [ ] 特殊字符处理正常
- [ ] 超长文本处理正常

---

### ✅ 8.3 测试边界情况

**测试内容：**
- [ ] 无数据时的空状态显示
- [ ] 大数据量时的性能
- [ ] 极端查询的处理

---

## 📊 测试结果记录

### 测试环境信息
- **测试日期：** _______________
- **测试人员：** _______________
- **后端版本：** _______________
- **前端版本：** _______________
- **Python 版本：** _______________
- **Node.js 版本：** _______________

### 测试结果统计
- **总测试项：** _______________
- **通过：** _______________
- **失败：** _______________
- **跳过：** _______________
- **通过率：** _______________%

### 发现的问题
1. _______________
2. _______________
3. _______________

### 备注
_______________

---

## 🚀 快速测试命令汇总

### 后端测试
```bash
# 系统测试
python tests/test_system.py

# Embedding 模型测试
python tests/test_embedding.py

# API 测试
python tests/test_api.py
```

### 前端测试
```bash
# 启动前端
npm run serve

# 构建生产版本
npm run build
```

### 集成测试
```bash
# 启动后端（终端 1）
cd C:\Users\23035\PycharmProjects\knowledge_gragh
python run.py

# 启动前端（终端 2）
cd C:\Users\23035\Desktop\备份\vue_test_style
npm run serve
```

---

**测试完成后，请填写测试结果并记录发现的问题！**

